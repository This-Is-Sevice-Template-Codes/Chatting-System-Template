## 1 📝 기술 명세서 (Technical Specification)

### 1.1 시스템 아키텍처 및 스택

- **Application:** Spring Boot 3.x (WebFlux)
- **Protocol:** WebSocket + STOMP (Pub/Sub 모델)
- **Database:** MySQL 8.0+ (R2DBC)
- **Broker:** In-Memory Broker (MVP 단계), 추후 External Broker(RabbitMQ)로 교체 가능한 인터페이스 설계.

### 1.2 데이터 모델링 (ERD 핵심)

범용성을 위해 **N:M 구조**를 기본으로 채택합니다.

1. **User (사용자):** 시스템 사용자.
2. **ChatRoom (채팅방):** 대화의 공간 (1:1 및 그룹 공용).
3. **ChatMember (참여자):** `User`와 `ChatRoom`의 매핑 테이블. (참여 여부, 마지막 읽은 시점 관리).
4. **ChatMessage (메시지):** 실제 대화 내용.

### 1.3 통신 프로토콜 (STOMP Path)

템플릿화를 위해 경로를 표준화합니다.

- **구독 (Subscribe):** `/sub/chat/room/{roomId}`
    - 해당 방의 메시지를 실시간 수신.
- **발행 (Publish):** `/pub/chat/message`
    - 메시지 전송 (Send).
- **발행 (Publish):** `/pub/chat/read`
    - 메시지 읽음 처리 (Read Ack).